<!DOCTYPE html>
<html lang="en">
<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <title>
      Tutorial: queries - Documentation
  </title>

  <link href="https://www.braintreepayments.com/images/favicon-ccda0b14.png" rel="icon" type="image/png">

  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.7.0/highlight.min.js"></script>
  <script>hljs.initHighlightingOnLoad();</script>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>

  <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
  <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
  
  <link type="text/css" rel="stylesheet" href="styles/collapse.css">
  

  

  <!-- start Mixpanel -->
  <script type="text/javascript">(function(e,a){if(!a.__SV){var b=window;try{var c,l,i,j=b.location,g=j.hash;c=function(a,b){return(l=a.match(RegExp(b+"=([^&]*)")))?l[1]:null};g&&c(g,"state")&&(i=JSON.parse(decodeURIComponent(c(g,"state"))),"mpeditor"===i.action&&(b.sessionStorage.setItem("_mpcehash",g),history.replaceState(i.desiredHash||"",e.title,j.pathname+j.search)))}catch(m){}var k,h;window.mixpanel=a;a._i=[];a.init=function(b,c,f){function e(b,a){var c=a.split(".");2==c.length&&(b=b[c[0]],a=c[1]);b[a]=function(){b.push([a].concat(Array.prototype.slice.call(arguments,
  0)))}}var d=a;"undefined"!==typeof f?d=a[f]=[]:f="mixpanel";d.people=d.people||[];d.toString=function(b){var a="mixpanel";"mixpanel"!==f&&(a+="."+f);b||(a+=" (stub)");return a};d.people.toString=function(){return d.toString(1)+".people (stub)"};k="disable time_event track track_pageview track_links track_forms register register_once alias unregister identify name_tag set_config reset people.set people.set_once people.increment people.append people.union people.track_charge people.clear_charges people.delete_user".split(" ");
  for(h=0;h<k.length;h++)e(d,k[h]);a._i.push([b,c,f])};a.__SV=1.2;b=e.createElement("script");b.type="text/javascript";b.async=!0;b.src="undefined"!==typeof MIXPANEL_CUSTOM_LIB_URL?MIXPANEL_CUSTOM_LIB_URL:"file:"===e.location.protocol&&"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js".match(/^\/\//)?"https://cdn.mxpnl.com/libs/mixpanel-2-latest.min.js":"//cdn.mxpnl.com/libs/mixpanel-2-latest.min.js";c=e.getElementsByTagName("script")[0];c.parentNode.insertBefore(b,c)}})(document,window.mixpanel||[]);
  mixpanel.init("1919205b2da72e4da3b9b6639b444d59");</script>
  <!-- end Mixpanel -->
</head>

<body>
  <svg style="display: none;">
    <defs>
      <symbol id="linkIcon" fill="#706d77" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M0 0h24v24H0z" fill="none"/>
          <path d="M3.9 12c0-1.71 1.39-3.1 3.1-3.1h4V7H7c-2.76 0-5 2.24-5 5s2.24 5 5 5h4v-1.9H7c-1.71 0-3.1-1.39-3.1-3.1zM8 13h8v-2H8v2zm9-6h-4v1.9h4c1.71 0 3.1 1.39 3.1 3.1s-1.39 3.1-3.1 3.1h-4V17h4c2.76 0 5-2.24 5-5s-2.24-5-5-5z"/>
      </symbol>
    </defs>
  </svg>

  <input type="checkbox" id="nav-trigger" class="nav-trigger" />
  <label for="nav-trigger" class="navicon-button x">
    <div class="navicon"></div>
  </label>

  <label for="nav-trigger" class="overlay"></label>

  <div class="top-nav-wrapper">
    <ul>
      <li >
        <a href="index.html">
          
            <svg fill="#6D6D6D" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
              <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>
              <path d="M0 0h24v24H0z" fill="none"/>
            </svg>
          
          
        </a>
      </li>

      

    </ul>
  </div>

  <nav>
    <h3 class="reference-title">
      jsimdb
    </h3>

    
      <h3>
        Resources
      </h3>
      
        <a href="https://en.wikipedia.org/wiki/Relational_database">Wikipedia</a>
      
    

    <h3 id="global-nav">Global</h3><ul><li><a href="global.html#Query">Query</a></li></ul>
  </nav>

  <div id="main">
    
      <h1 class="page-title">
        Tutorial: queries
      </h1>
    

    <section>
  <header>
    

    <h2>
      queries
    </h2>
  </header>

  <article>
    <h2>Query Objects</h2>
<pre class="prettyprint source lang-javascript"><code>db.find([
    new Query('tablename', 'fieldname1', 'eq', 'John'),
    new Query('tablename' 'fieldname2', 'gt', 42)
], {
    caseSensitive: true
}, (err, entries) => {
    if (err)
})
</code></pre>
<p>Each Query object specifies the table to be searched, the field to be matched, the comparison function used match, and the value to compare against.</p>
<p>Note: you must instantiate a Query with <code>new</code>!</p>
<h2>Match Types</h2>
<table>
<thead>
<tr>
<th>Function</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td>eq</td>
<td>equal to</td>
</tr>
<tr>
<td>gt</td>
<td>greater than</td>
</tr>
<tr>
<td>lt</td>
<td>less than</td>
</tr>
<tr>
<td>gte</td>
<td>greater than or equal to</td>
</tr>
<tr>
<td>lte</td>
<td>less than or equal to</td>
</tr>
<tr>
<td>regex</td>
<td>regular expression</td>
</tr>
<tr>
<td>contains</td>
<td>array contains</td>
</tr>
</tbody>
</table>
<h2>Query Methods</h2>
<p>A query can be made with one rule or unlimited rules.</p>
<p>Which query function you call determines the logic performed on the rules.
Matching entries will be returned in the form of an object with each entry's id as the keys.
If there are no entries, null will be returned.
Never {} or undefined.</p>
<table>
<thead>
<tr>
<th>name</th>
<th>logic</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>find</td>
<td><code>AND</code></td>
<td>Alias for <code>findAll</code></td>
</tr>
<tr>
<td>findAll</td>
<td><code>AND</code></td>
<td>Returns all</td>
</tr>
<tr>
<td>findAny</td>
<td><code>OR</code></td>
<td>Returns all</td>
</tr>
<tr>
<td>findAnyN</td>
<td><code>OR</code></td>
<td>Returns the first N</td>
</tr>
<tr>
<td>findAnyOne</td>
<td><code>OR</code></td>
<td>Returns the first</td>
</tr>
<tr>
<td>findById</td>
<td>N/A</td>
<td>Exception to the query rule, see below</td>
</tr>
<tr>
<td>findN</td>
<td><code>AND</code></td>
<td>Returns the first N</td>
</tr>
<tr>
<td>findOne</td>
<td><code>AND</code></td>
<td>Returns the first</td>
</tr>
</tbody>
</table>
<p>In the case of <code>findById</code>, instead of a query object you only need to pass a UUID that will match with a single entry.</p>
<h2>Options</h2>
<p>In order to provide more flexibility, the <code>find()</code> method allows an options object to customize the search. This allows you to either hard code the query function, or to determine it at run time.</p>
<p>Note: some of these options are supported only for specified query functions. If an unsupported option is passed, the search will continue as if it had not been.</p>
<table>
<thead>
<tr>
<th>name</th>
<th>type</th>
<th>default</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>caseSensitive</td>
<td>boolean</td>
<td>false</td>
<td>whether or not to match case</td>
</tr>
<tr>
<td>n</td>
<td>number</td>
<td>-1</td>
<td>for <code>findN</code> and <code>findAnyN</code> queries only, how many items to find. -1 returns all. 0 returns null.</td>
</tr>
<tr>
<td>queryFunction</td>
<td>string</td>
<td>'all'</td>
<td>selects the query function to call. the string is the function name, dropping 'find', e.g. 'anyOne'</td>
</tr>
</tbody>
</table>
<h2>Putting it all together</h2>
<p>Let's say you have a table of employee info or something.
You want to find all employees with the name Jeff that don't have an email.</p>
<pre class="prettyprint source lang-javascript"><code>db.findAll(
    new Query('employees', 'name', 'eq', 'Jeff'),
    (err, entries) => {
        if (err) console.log(err)
        res.render('page', { employeesNamedJeff: entries })
    }
)
</code></pre>
<p>or maybe you want any employees with '@gmail.com' or '@live.com' email adresses</p>
<pre class="prettyprint source lang-javascript"><code>db.findAny(
    new Query('employees', 'email', 'regex', RegExp(/.+@((gmail)|(live)).com/g)),
    (err, entries) => {
        if (err) console.log(err)
    }
    res.render('page', { emails: entries })
)
</code></pre>
  </article>
</section>

  </div>

  <br class="clear">

  <footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.5</a>
  </footer>

  <script src="scripts/linenumber.js"></script>
  <script src="scripts/pagelocation.js"></script>

  

</body>
</html>